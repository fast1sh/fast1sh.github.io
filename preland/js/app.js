var statusPopup={},helper=new Helper;function Helper(){this.randomInteger=function(e,t){var r=e-.5+Math.random()*(t-e+1);return r=Math.round(r)},this.availableStorage=function(){try{return"localStorage"in window&&null!==window.localStorage}catch(e){return!1}},this.deserialize=function(e,t,r){var n=decodeURIComponent(t).split("&"),a=0,o=null,i=null,c=null,p=null;r&&($('input[type="checkbox"],input[type="radio"]',e).removeAttr("checked"),$('select,input[type="text"],input[type="password"],input[type="hidden"],textarea',e).val(""));for(var l={};o=n[a++];)i=(p=o.split("="))[0]||"",c=(p[1]||"").replace(/\+/g," "),""!=i&&(i in l?("array"!==$.type(l[i])&&(l[i]=[l[i]]),l[i].push(c)):l[i]=c);for(i in l)c=l[i],$('input[type="checkbox"][name="'+i+'"][value="'+c+'"],input[type="radio"][name="'+i+'"][value="'+c+'"]',e).prop("checked",!0),$('select[name="'+i+'"],input[type="text"][name="'+i+'"],input[type="password"][name="'+i+'"],input[type="hidden"][name="'+i+'"],textarea[name="'+i+'"]',e).val(c)}}function posibleShow(e){return!statusPopup[e]}function addShowWindow(e){statusPopup[e]=!0}function delShowWindow(e){posibleShow(e)&&(statusPopup[e]=!1)}function addCountry(e,t){$.each(e,(function(e,r){var n=$("<option></option>").attr("value",e).text(r);t==e&&n.attr("selected","selected"),$(".orderFormWrapperCountry").append(n),$(".orderFormWrapperCountry").trigger("change")}))}function set_cookie(e,t,r,n,a,o,i,c,p,l){var u=e+"="+t;r&&(u+="; expires="+new Date(r,n,a,o,i).toGMTString());c&&(u+="; path="+c),p&&(u+="; domain="+p),l&&(u+="; secure"),document.cookie=u}function get_cookie(e){var t=document.cookie.match("(^|;) ?"+e+"=([^;]*)(;|$)");return t?t[2]:null}$((function(){$("form").submit((function(){$(window).off("beforeunload")}));var e=new Inputmask("phone").aliases.phone.phoneCodes;$("body").on("change",".orderFormWrapperCountry",(function(){var t=$(this).val();""!=t&&null!=t||(t=window.curent_country);var r=e.map((function(e){return e.cc})).indexOf(t);$('#callback__phone, input[name="phone"]').attr("placeholder",e[r].mask),$(".orderFormWrapperCountry").each((function(){$(this).val(t)}));var n=window.allPrices[$(this).val()];if("layer"==window.pageType)var a=n.cost+" "+n.currency,o=n.cost+" "+n.currency,i=n.oldPrice+" "+n.currency,c=n.cost,p=n.oldPrice,l=n.currency,u="",s=n.cost+(1*n.type==2||1*n.type==3||1*n.type==99||1*n.type==8?" "+n.currency+" *":" "+n.currency),d=1*n.type==2||1*n.type==3||1*n.type==99||1*n.type==8?" *":"";else a=n.cost+(1*n.type==2||1*n.type==3||1*n.type==99||1*n.type==8?" "+n.currency+" *":" "+n.currency),o=n.cost+" "+n.currency,i=n.oldPrice+" "+n.currency,c=n.cost,p=n.oldPrice,l=n.currency,u=1*n.type==2||1*n.type==3||1*n.type==99||1*n.type==8?" *":"";var y="";1*n.type==2?y="* За одну порцию":1*n.type==3&&(y="* При заказе полного курса"),$(".formDesc").each((function(){$(this).html(y)})),$(".new_prise .new_prise_number, .displayCurrentPriceNoCyr").text(c),$(".new_prise .new_prise_currency, .displayCurrentCurrency").html(l+u),$(".realPrice, .displayCurrentPrice").html(a),$(".old_price, .displayPrevPrice").html(i),$(".realPrice, .displayCurrentPriceShortCyr").html(a),$(".old_price, .displayPrevPriceShortCyr").html(i),$(".displayPrevPriceNoCyr").text(p),$(".displayPrevPriceShortCyr").html(l+u),$(".onlycurrencyphldr").html(l),$(".onlypricecurrencyphldr").html(o),$(".prelandStarPrice").html(s),$(".displayPrevPriceShortCyr").html(l+d)})),helper.availableStorage()&&localStorage.form&&$(".orderFormWrapperCountry").each((function(e){helper.deserialize(this,localStorage.form,!1)})),$("html").mouseleave((function(){var e=get_cookie("leaveflag");if(null==e){$(".ma1leaveBlock").show();var t=new Date;set_cookie("leaveflag","1",t.getFullYear(),t.getMonth(),t.getDate(),t.getHours(),t.getMinutes()+1)}})),$(".ma1leaveBlock").click((function(e){e.target==this&&$(this).hide()})),$('#callback__phone, input[name="phone"]').keypress((function(e){var t=e.keyCode;if(8==t||46==t||37==t||39==t)return!0;if($(this).val().length>20&&8!=t&&46!=t&&37!=t&&39!=t)return!1;return/[0-9()\-+]/.test(e.key)})),$('input[name="name"], input[name="phone"]').attr("required","required");for(var t=$('[data-click="true"]'),r=0;r<t.length;r++)$(t[r]).on("click",(function(e){e.preventDefault(),$($(this).data("target")).show(),$($(this).data("target")).children().first().on("click",(function(e){e.stopPropagation()})),$($(this).data("target")).on("click",(function(){$(this).hide()}))}));for(t=$('[data-toggle="true"]'),r=0;r<t.length;r++)$(t[r]).on("click",(function(e){e.preventDefault(),$($(this).data("target")).slideToggle()}));null!==$(".orderFormWrapperCountry").val()&&$(".orderFormWrapperCountry").trigger("change")}));var getUrlParameter=function(e){var t,r,n=decodeURIComponent(window.location.search.substring(1)).split("&");for(r=0;r<n.length;r++)if((t=n[r].split("="))[0]===e)return void 0===t[1]||t[1]};$(document).ready((function(){$("#payForm").submit((function(e){return e.preventDefault(),e.stopPropagation(),!1})),$("#sendOrderAjax").click((function(e){e.preventDefault(),e.stopPropagation();var t=$('input[name="pay_phone"]').val(),r=$('input[name="pay_name"]').val(),n=$('input[name="pay_city"]').val(),a=$('input[name="pay_street"]').val(),o=$('input[name="pay_home"]').val(),i=$('input[name="pay_region"]').val(),c=$('input[name="pay_zip"]').val(),p=$('select[name="pay_country"]').val(),l="",u="",s="",d=window.location.href,y=$('input[name="specialOfferCount"]').val(),h=$('input[name="specialOfferPrice"]').val(),m=h;if(-1!==document.location.toString().indexOf("?"))for(var f=document.location.toString().replace(/^.*?\?/,"").replace(/#.*$/,"").split("&"),v=0,g=f.length;v<g;v++){var w=decodeURIComponent(f[v]).split("=");"id"==w[0]&&(l=w[1])}return $("body").prepend('<div id="payPreloader" style="display: flex;align-items: center;justify-content: center;background: #000000d1;width: 100%;height: 100%;position: fixed;z-index: 9999999;"><svg xmlns:svg="http://www.w3.org/2000/svg" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" version="1.0" width="64px" height="64px" viewBox="0 0 128 128" xml:space="preserve"><g transform="rotate(12.8571 64 64)"><path d="M75.4 126.63a11.43 11.43 0 0 1-2.1-22.65 40.9 40.9 0 0 0 30.5-30.6 11.4 11.4 0 1 1 22.27 4.87h.02a63.77 63.77 0 0 1-47.8 48.05v-.02a11.38 11.38 0 0 1-2.93.37z" fill="#ffffff" fill-opacity="1"></path><animateTransform attributeName="transform" type="rotate" from="0 64 64" to="360 64 64" dur="1400ms" repeatCount="indefinite"></animateTransform></g></svg></div>'),$("body").css("overflow","hidden"),$.ajax({type:"POST",data:"phone="+t+"&fullName="+r+"&city="+n+"&street="+a+"&home="+o+"&country="+p+"&region="+i+"&zip="+c+"&payAjax=1&clickId="+l+"&cd_count="+y+"&full_price="+h,success:function(e,t,r){var n=JSON.parse(e);u=1*n.orderId,s=n.sign,$('input[name="PIMPAY_EXTERNAL_ID"]').val(u),$('input[name="PIMPAY_AMOUNT"]').val(m),$('input[name="PIMPAY_SUCCESS_URL"]').val(d+"&success=1&amount="+m),$('input[name="PIMPAY_FAIL_URL"]').val(d+"&fail=1&amount="+m),$('input[name="PIMPAY_SIGN"]').val(s),$("#payPreloader").remove(),$("body").css("overflow","initial"),$("#pimpayForm").submit()},error:function(e,t,r){}}),!1})),$(".dop2__btn").on("click",(function(e){var t=$(this).data("count"),r=$(this).data("price");$('input[name="specialOfferCount"]').val(t),$('input[name="specialOfferPrice"]').val(r),$("#accordeonFormContainer").show()})),$(".FOOTER_INFO").on("copy cut contextmenu",(function(e){return e.preventDefault(),!1}))}));