!function(){"use strict";!function(){if("object"==typeof window)if("IntersectionObserver"in window&&"IntersectionObserverEntry"in window&&"intersectionRatio"in window.IntersectionObserverEntry.prototype)"isIntersecting"in window.IntersectionObserverEntry.prototype||Object.defineProperty(window.IntersectionObserverEntry.prototype,"isIntersecting",{get:function(){return 0<this.intersectionRatio}});else{var e=function(){for(var e=window.document,t=r(e);t;)t=r(e=t.ownerDocument);return e}(),t=[],i=null,n=null;s.prototype.THROTTLE_TIMEOUT=100,s.prototype.POLL_INTERVAL=null,s.prototype.USE_MUTATION_OBSERVER=!0,s._setupCrossOriginUpdater=function(){return i=i||function(e,i){n=e&&i?u(e,i):{top:0,bottom:0,left:0,right:0,width:0,height:0},t.forEach((function(e){e._checkForIntersections()}))}},s._resetCrossOriginUpdater=function(){n=i=null},s.prototype.observe=function(e){if(!this._observationTargets.some((function(t){return t.element==e}))){if(!e||1!=e.nodeType)throw new Error("target must be an Element");this._registerInstance(),this._observationTargets.push({element:e,entry:null}),this._monitorIntersections(e.ownerDocument),this._checkForIntersections()}},s.prototype.unobserve=function(e){this._observationTargets=this._observationTargets.filter((function(t){return t.element!=e})),this._unmonitorIntersections(e.ownerDocument),0==this._observationTargets.length&&this._unregisterInstance()},s.prototype.disconnect=function(){this._observationTargets=[],this._unmonitorAllIntersections(),this._unregisterInstance()},s.prototype.takeRecords=function(){var e=this._queuedEntries.slice();return this._queuedEntries=[],e},s.prototype._initThresholds=function(e){var t=e||[0];return Array.isArray(t)||(t=[t]),t.sort().filter((function(e,t,i){if("number"!=typeof e||isNaN(e)||e<0||1<e)throw new Error("threshold must be a number between 0 and 1 inclusively");return e!==i[t-1]}))},s.prototype._parseRootMargin=function(e){var t=(e||"0px").split(/\s+/).map((function(e){var t=/^(-?\d*\.?\d+)(px|%)$/.exec(e);if(!t)throw new Error("rootMargin must be specified in pixels or percent");return{value:parseFloat(t[1]),unit:t[2]}}));return t[1]=t[1]||t[0],t[2]=t[2]||t[0],t[3]=t[3]||t[1],t},s.prototype._monitorIntersections=function(t){var i=t.defaultView;if(i&&-1==this._monitoringDocuments.indexOf(t)){var n=this._checkForIntersections,o=null,s=null;this.POLL_INTERVAL?o=i.setInterval(n,this.POLL_INTERVAL):(a(i,"resize",n,!0),a(t,"scroll",n,!0),this.USE_MUTATION_OBSERVER&&"MutationObserver"in i&&(s=new i.MutationObserver(n)).observe(t,{attributes:!0,childList:!0,characterData:!0,subtree:!0})),this._monitoringDocuments.push(t),this._monitoringUnsubscribes.push((function(){var e=t.defaultView;e&&(o&&e.clearInterval(o),d(e,"resize",n,!0)),d(t,"scroll",n,!0),s&&s.disconnect()}));var c=this.root&&(this.root.ownerDocument||this.root)||e;if(t!=c){var l=r(t);l&&this._monitorIntersections(l.ownerDocument)}}},s.prototype._unmonitorIntersections=function(t){var i=this._monitoringDocuments.indexOf(t);if(-1!=i){var n=this.root&&(this.root.ownerDocument||this.root)||e;if(!this._observationTargets.some((function(e){var i=e.element.ownerDocument;if(i==t)return!0;for(;i&&i!=n;){var o=r(i);if((i=o&&o.ownerDocument)==t)return!0}return!1}))){var o=this._monitoringUnsubscribes[i];if(this._monitoringDocuments.splice(i,1),this._monitoringUnsubscribes.splice(i,1),o(),t!=n){var s=r(t);s&&this._unmonitorIntersections(s.ownerDocument)}}}},s.prototype._unmonitorAllIntersections=function(){var e=this._monitoringUnsubscribes.slice(0);this._monitoringDocuments.length=0;for(var t=this._monitoringUnsubscribes.length=0;t<e.length;t++)e[t]()},s.prototype._checkForIntersections=function(){if(this.root||!i||n){var e=this._rootIsInDom(),t=e?this._getRootRect():{top:0,bottom:0,left:0,right:0,width:0,height:0};this._observationTargets.forEach((function(n){var r=n.element,s=c(r),a=this._rootContainsTarget(r),d=n.entry,l=e&&a&&this._computeTargetAndRootIntersection(r,s,t),u=null;this._rootContainsTarget(r)?i&&!this.root||(u=t):u={top:0,bottom:0,left:0,right:0,width:0,height:0};var h=n.entry=new o({time:window.performance&&performance.now&&performance.now(),target:r,boundingClientRect:s,rootBounds:u,intersectionRect:l});d?e&&a?this._hasCrossedThreshold(d,h)&&this._queuedEntries.push(h):d&&d.isIntersecting&&this._queuedEntries.push(h):this._queuedEntries.push(h)}),this),this._queuedEntries.length&&this._callback(this.takeRecords(),this)}},s.prototype._computeTargetAndRootIntersection=function(t,r,o){if("none"!=window.getComputedStyle(t).display){for(var s,a,d,l,h,g,w,m,v=r,f=p(t),b=!1;!b&&f;){var y=null,I=1==f.nodeType?window.getComputedStyle(f):{};if("none"==I.display)return null;if(f==this.root||9==f.nodeType)if(b=!0,f==this.root||f==e)i&&!this.root?!n||0==n.width&&0==n.height?v=y=f=null:y=n:y=o;else{var k=p(f),_=k&&c(k),E=k&&this._computeTargetAndRootIntersection(k,_,o);_&&E?(f=k,y=u(_,E)):v=f=null}else{var S=f.ownerDocument;f!=S.body&&f!=S.documentElement&&"visible"!=I.overflow&&(y=c(f))}if(y&&(s=y,a=v,d=Math.max(s.top,a.top),l=Math.min(s.bottom,a.bottom),h=Math.max(s.left,a.left),m=l-d,v=0<=(w=(g=Math.min(s.right,a.right))-h)&&0<=m?{top:d,bottom:l,left:h,right:g,width:w,height:m}:null),!v)break;f=f&&p(f)}return v}},s.prototype._getRootRect=function(){var t;if(this.root&&!g(this.root))t=c(this.root);else{var i=g(this.root)?this.root:e,n=i.documentElement,r=i.body;t={top:0,left:0,right:n.clientWidth||r.clientWidth,width:n.clientWidth||r.clientWidth,bottom:n.clientHeight||r.clientHeight,height:n.clientHeight||r.clientHeight}}return this._expandRectByRootMargin(t)},s.prototype._expandRectByRootMargin=function(e){var t=this._rootMarginValues.map((function(t,i){return"px"==t.unit?t.value:t.value*(i%2?e.width:e.height)/100})),i={top:e.top-t[0],right:e.right+t[1],bottom:e.bottom+t[2],left:e.left-t[3]};return i.width=i.right-i.left,i.height=i.bottom-i.top,i},s.prototype._hasCrossedThreshold=function(e,t){var i=e&&e.isIntersecting?e.intersectionRatio||0:-1,n=t.isIntersecting?t.intersectionRatio||0:-1;if(i!==n)for(var r=0;r<this.thresholds.length;r++){var o=this.thresholds[r];if(o==i||o==n||o<i!=o<n)return!0}},s.prototype._rootIsInDom=function(){return!this.root||h(e,this.root)},s.prototype._rootContainsTarget=function(t){var i=this.root&&(this.root.ownerDocument||this.root)||e;return h(i,t)&&(!this.root||i==t.ownerDocument)},s.prototype._registerInstance=function(){t.indexOf(this)<0&&t.push(this)},s.prototype._unregisterInstance=function(){var e=t.indexOf(this);-1!=e&&t.splice(e,1)},window.IntersectionObserver=s,window.IntersectionObserverEntry=o}function r(e){try{return e.defaultView&&e.defaultView.frameElement||null}catch(e){return null}}function o(e){this.time=e.time,this.target=e.target,this.rootBounds=l(e.rootBounds),this.boundingClientRect=l(e.boundingClientRect),this.intersectionRect=l(e.intersectionRect||{top:0,bottom:0,left:0,right:0,width:0,height:0}),this.isIntersecting=!!e.intersectionRect;var t=this.boundingClientRect,i=t.width*t.height,n=this.intersectionRect,r=n.width*n.height;this.intersectionRatio=i?Number((r/i).toFixed(4)):this.isIntersecting?1:0}function s(e,t){var i,n,r,o=t||{};if("function"!=typeof e)throw new Error("callback must be a function");if(o.root&&1!=o.root.nodeType&&9!=o.root.nodeType)throw new Error("root must be a Document or Element");this._checkForIntersections=(i=this._checkForIntersections.bind(this),n=this.THROTTLE_TIMEOUT,r=null,function(){r=r||setTimeout((function(){i(),r=null}),n)}),this._callback=e,this._observationTargets=[],this._queuedEntries=[],this._rootMarginValues=this._parseRootMargin(o.rootMargin),this.thresholds=this._initThresholds(o.threshold),this.root=o.root||null,this.rootMargin=this._rootMarginValues.map((function(e){return e.value+e.unit})).join(" "),this._monitoringDocuments=[],this._monitoringUnsubscribes=[]}function a(e,t,i,n){"function"==typeof e.addEventListener?e.addEventListener(t,i,n||!1):"function"==typeof e.attachEvent&&e.attachEvent("on"+t,i)}function d(e,t,i,n){"function"==typeof e.removeEventListener?e.removeEventListener(t,i,n||!1):"function"==typeof e.detatchEvent&&e.detatchEvent("on"+t,i)}function c(e){var t;try{t=e.getBoundingClientRect()}catch(e){}return t?(t.width&&t.height||(t={top:t.top,right:t.right,bottom:t.bottom,left:t.left,width:t.right-t.left,height:t.bottom-t.top}),t):{top:0,bottom:0,left:0,right:0,width:0,height:0}}function l(e){return!e||"x"in e?e:{top:e.top,y:e.top,bottom:e.bottom,left:e.left,x:e.left,right:e.right,width:e.width,height:e.height}}function u(e,t){var i=t.top-e.top,n=t.left-e.left;return{top:i,left:n,height:t.height,width:t.width,bottom:i+t.height,right:n+t.width}}function h(e,t){for(var i=t;i;){if(i==e)return!0;i=p(i)}return!1}function p(t){var i=t.parentNode;return 9==t.nodeType&&t!=e?r(t):(i&&i.assignedSlot&&(i=i.assignedSlot.parentNode),i&&11==i.nodeType&&i.host?i.host:i)}function g(e){return e&&9===e.nodeType}}();var e,t,i,n,r=function(){return(r=Object.assign||function(e){for(var t,i=1,n=arguments.length;i<n;i++)for(var r in t=arguments[i])Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=t[r]);return e}).apply(this,arguments)};function o(e,t,i,n){return new(i=i||Promise)((function(r,o){function s(e){try{d(n.next(e))}catch(e){o(e)}}function a(e){try{d(n.throw(e))}catch(e){o(e)}}function d(e){var t;e.done?r(e.value):((t=e.value)instanceof i?t:new i((function(e){e(t)}))).then(s,a)}d((n=n.apply(e,t||[])).next())}))}function s(e,t){var i,n,r,o,s={label:0,sent:function(){if(1&r[0])throw r[1];return r[1]},trys:[],ops:[]};return o={next:a(0),throw:a(1),return:a(2)},"function"==typeof Symbol&&(o[Symbol.iterator]=function(){return this}),o;function a(o){return function(a){return function(o){if(i)throw new TypeError("Generator is already executing.");for(;s;)try{if(i=1,n&&(r=2&o[0]?n.return:o[0]?n.throw||((r=n.return)&&r.call(n),0):n.next)&&!(r=r.call(n,o[1])).done)return r;switch(n=0,r&&(o=[2&o[0],r.value]),o[0]){case 0:case 1:r=o;break;case 4:return s.label++,{value:o[1],done:!1};case 5:s.label++,n=o[1],o=[0];continue;case 7:o=s.ops.pop(),s.trys.pop();continue;default:if(!(r=0<(r=s.trys).length&&r[r.length-1])&&(6===o[0]||2===o[0])){s=0;continue}if(3===o[0]&&(!r||o[1]>r[0]&&o[1]<r[3])){s.label=o[1];break}if(6===o[0]&&s.label<r[1]){s.label=r[1],r=o;break}if(r&&s.label<r[2]){s.label=r[2],s.ops.push(o);break}r[2]&&s.ops.pop(),s.trys.pop();continue}o=t.call(e,s)}catch(e){o=[6,e],n=0}finally{i=r=0}if(5&o[0])throw o[1];return{value:o[0]?o[1]:void 0,done:!0}}([o,a])}}}function a(){for(var e=0,t=0,i=arguments.length;t<i;t++)e+=arguments[t].length;var n=Array(e),r=0;for(t=0;t<i;t++)for(var o=arguments[t],s=0,a=o.length;s<a;s++,r++)n[r]=o[s];return n}function d(e,t){for(var i=[],n=2;n<arguments.length;n++)i[n-2]=arguments[n];window.aiturecSharedData.isDebugModeSet&&console[e].apply(console,a([t],i))}function c(){window.ga&&(ga(b,"page",window.location.pathname),ga("aiturecTracker.send","pageview"))}(t=e=e||{}).Log="log",t.Warn="warn",t.Error="error",(n=i=i||{}).Log="log",n.Warn="warn",n.Error="error",n.Group="group",n.GroupEnd="groupEnd";var l=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];return d.apply(void 0,a([i.Log],e))},u=function(e){for(var t=[],n=1;n<arguments.length;n++)t[n-1]=arguments[n];return d.apply(void 0,a([i.Error,new Error(e)],t))},h=function(e,t){return void 0===t&&(t=!0),d(i.Group,t?"[Aiturec-observer]: "+e:e)},p=function(e){if(void 0===e&&(e=1),1!==e)for(var t=0;t<e;t+=1)d(i.GroupEnd);else d(i.GroupEnd)},g=function(e,t,i){var n="\n    padding: 4px 12px;\n    background-color: "+(t?"rgba(31, 238, 4, 0.3)":"rgba(255, 0, 0, 0.5)")+";\n    font-family: 'Verdana';\n    font-size: 1.1em;\n  ";console.group("%c"+e+" "+(t?"✓":"✕"),n),i(),console.groupEnd()},w=function(e,t){var i="\n    padding: 4px 8px;\n    background-color: "+(t?"rgba(31, 238, 4, 0.3)":"rgba(255, 0, 0, 0.5)")+";\n    font-family: 'Verdana';\n  ";console.log("%c"+e+" "+(t?"✓":"✕"),i)},m=function(e){console.log("%c"+e,"\n    padding: 4px 8px;\n    background-color: rgba(31, 238, 4, 0.3);\n    font-family: 'Verdana';\n  ")},v="UA-152780262-6",f="aiturecTracker",b=f+".set",y=function(e){var t=e.projectId;if(window.ga)ga("create",{trackingId:v,cookieDomain:"auto",name:f}),ga(b,"dimension1",t);else{var i=document.createElement("script");i.type="text/javascript";var n="\n      (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){\n      (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),\n      m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)\n      })(window,document,'script','https://www.google-analytics.com/analytics.js','ga');\n      ga('create', {\n        trackingId: '"+v+"',\n        cookieDomain: 'auto',\n        name: '"+f+"',\n      });\n      ga('"+b+"', 'dimension1', '"+t+"');\n    ";i.appendChild(document.createTextNode(n)),document.head.appendChild(i)}},I=/([\.$?*|{}\(\)\[\]\\\/\+^])/g;function k(e){var t=document.cookie.match(new RegExp("(?:^|; )"+e.replace(I,"\\$1")+"=([^;]*)"));return t?decodeURIComponent(t[1]):void 0}function _(e,t,i){var n=r({path:"/","max-age":31536e3},i),o=encodeURIComponent(e)+"="+encodeURIComponent(t);return Object.keys(n).forEach((function(e){o+="; "+e;var t=n[e];!0!==t&&(o+="="+t)})),document.cookie=o,t}function E(){return document.querySelector('meta[property="'+P+'"]')}function S(){var e;return null===(e=E())||void 0===e?void 0:e.getAttribute("content")}function x(){var e;return"true"===(null===(e=document.querySelector('meta[property="aiturec:is_adult"]'))||void 0===e?void 0:e.getAttribute("content"))}function C(e){return'Property "'+e+'" should be an array'}function O(e){return'Property "'+e+'" cannot be an empty array'}var T="data-ainews-click-widget-id",j="data-ainews-click-styles-id",R="data-ainews-click-item-id",B="data-ainews-click-grid-type",D="data-ainews-click-teaser-item-id",A="data-ainews-click-url-type",N="_ainewsb2b_uid",M="_ainewsb2b_debug_mode",P="aiturec:item_id",W="aiturec:is_article",L="aiturec:title",q="aiturec:description",U="aiturec:datetime",F=document.querySelector("html"),V='"Project ID" cannot be empty',H=function(e){return'Incorrect value "'+e+'" for property "eventType"'},z="No widget information found",J=function(e){return'Unknown command "'+e+'" for widget service'},G=function(e){return'Property "'+e+'" cannot be empty'},$=function(e){return"running command "+e},K=function(e){return"result of command "+e},Q="Exists",X=function(e){g(e.title,e.exists&&e.correctlyInstalled,(function(){w(Q,e.exists),e.exists&&w("Correct value type",e.correctlyInstalled),e.value&&m("Value - "+e.value)}))};function Y(){var e,t=function(){var e=E();return{title:P,exists:!!e,correctlyInstalled:!!e&&!!S()}}(),i=function(){var e=document.querySelector('meta[property="'+W+'"]');return{title:W,exists:!!e,correctlyInstalled:!!e&&("true"===e.content||"false"===e.content)}}(),n=function(){var e=document.querySelector('meta[property="'+L+'"]');if(e)return{title:L,type:"aiturec",exists:!0,correctlyInstalled:!!e.content};var t=document.querySelector('meta[property="og:title"]');if(t)return{title:"og:title",type:"og",exists:!0,correctlyInstalled:!!t.content};var i=document.querySelector("title");return i?{title:"title tag",type:"standard",exists:!0,correctlyInstalled:!!i.innerText}:{title:"title",exists:!1,correctlyInstalled:!1}}(),r=function(){var e=document.querySelector('meta[property="'+q+'"]');if(e)return{title:q,type:"aiturec",exists:!0,correctlyInstalled:!!e.content};var t=document.querySelector('meta[property="og:description"]');if(t)return{title:"og:description",type:"og",exists:!0,correctlyInstalled:!!t.content};var i=document.querySelector('meta[name="description"]');return i?{title:"meta description",type:"standard",exists:!0,correctlyInstalled:!!i.content}:{title:"description",exists:!1,correctlyInstalled:!1}}(),o=function(){var e,t=document.querySelector('meta[property="'+U+'"]');return{title:U,exists:!!t,correctlyInstalled:!!t&&(e=t.content,new RegExp(/^(-?(?:[1-9][0-9]*)?[0-9]{4})-(1[0-2]|0[1-9])-(3[01]|0[1-9]|[12][0-9])T(2[0-3]|[01][0-9]):([0-5][0-9]):([0-5][0-9])(\.[0-9]+)?(Z|[+-](?:2[0-3]|[01][0-9]):[0-5][0-9])?$/).test(e)),value:null==t?void 0:t.content}}(),s=(null==F?void 0:F.getAttribute("xml:lang"))||(null==F?void 0:F.getAttribute("lang")),a=!!s&&t.correctlyInstalled&&n.correctlyInstalled&&r.correctlyInstalled&&o.correctlyInstalled&&("v1"===window.ainewsClickData.appVersion||i.correctlyInstalled);g("Required meta tags check",a,(function(){g("Check html lang attribute",!!s,(function(){w(Q,!!s),s&&m("Value - "+s)})),X(t),"v2"===window.ainewsClickData.appVersion&&X(i),X(n),X(r),X(o)})),w("Check PROJECT_ID",(e=window.ainewsClickData.projectId,new RegExp(/^[0-9a-f]{8}-[0-9a-f]{4}-[0-5][0-9a-f]{3}-[089ab][0-9a-f]{3}-[0-9a-f]{12}$/i).test(e)));var d=window.ainewsClickData.widgetsById&&0<Object.keys(window.ainewsClickData.widgetsById).length;w("Check widget installation",d)}function Z(e){var t=e.name,i=void 0===t?"aiturec":t,n=e.service,r=e.args;return i+'("'+n+'", '+Array.prototype.slice.call(r).map((function(e){return JSON.stringify(e)})).join(", ")+")"}var ee="dmpkitdl_click";function te(e){window[ee]||(window[ee]=[]),window[ee].push({event:e})}var ie,ne,re=function(){!function(e,t,i,n,r,o){e[n]=e[n]||[];var s=t.getElementsByTagName(i)[0],a=t.createElement(i);a.async=!0,a.src="//dmp.dt.aitudala.kz/tm.js?id=068dc03e-b469-4b5e-be2a-933827f96827&l=dmpkitdl_click",s.parentNode.insertBefore(a,s)}(window,document,"script",ee)},oe="dataLayer_click",se=function(){!function(e,t,i,n,r){var o=e;o[n]=o[n]||[],o[n].push({"gtm.start":(new Date).getTime(),event:"gtm.js"});var s=t.getElementsByTagName(i)[0],a=t.createElement(i);a.async=!0,a.src="https://www.googletagmanager.com/gtm.js?id=GTM-W9PXD33&l=dataLayer_click",s.parentNode.insertBefore(a,s)}(window,document,"script",oe)},ae=function(e){var t,i,n,o=e.eventName,s=e.dimensions,a=e.widgetId;window[oe]||(window[oe]=[]),window[oe].push(r(r({event:"click_event",event_name:o},(t=a,n=window.ainewsClickData.widgetsById[t],{ainews_click_id:k(N),domain:window.location.hostname,lang:n.lang,project_id:n.project_id,widget_id:t,widget_type:n.kind,widget_template:null===(i=n.instance)||void 0===i?void 0:i.currentBreakpoint.grid,widget_render_template:n.widgetRenderTemplate,template_expected:n.templateExpected})),s))};function de(){var e=k(M);e&&"true"===e||(_(M,"true"),window.location.reload())}function ce(){var e=k(M);e&&"false"!==e&&(_(M,"",{"max-age":-1}),window.location.reload())}function le(e){var t,i=e.method,n=void 0===i?ie.Get:i,o=e.body,s=e.path,a=e.barePath,d=e.query,c=e.queryObject,u=e.queryObjectForLogger,g=e.withoutResponse,w=e.success,m=e.error;if(null!==(t=window.ainewsClickData)&&void 0!==t&&t.apiUrl){var v,f,b="";d||c&&Object.keys(c).length||(b=""),d&&(b=d),!d&&c&&Object.keys(c).length&&(v=r(r({},c),{user_id:window.aiturecSharedData.uid}),b=Object.keys(v).filter((function(e){return void 0!==v[e]})).map((function(e){return encodeURIComponent(e)+"="+encodeURIComponent(v[e])})).join("&")),(u||c)&&(h("request parameters",!1),f=u||c||{},Object.keys(f).filter((function(e){return void 0!==f[e]})).map((function(e){return e+": "+f[e]})).forEach((function(e){return l(e)})),p(2)),n===ie.Post&&o&&(h("request body",!1),l(JSON.stringify(o,null,2)),p(2));var y=new XMLHttpRequest,I="";s?I=n===ie.Post?""+window.ainewsClickData.apiUrl+s:""+window.ainewsClickData.apiUrl+s+"?"+b:a&&!b?I=a:a&&b&&(I=a+"?"+b),y.open(n,I,!0),y.withCredentials=!0,n===ie.Post&&y.setRequestHeader("Content-type","application/json; charset=utf-8"),y.onload=function(){if(200<=y.status&&y.status<400){if(201===y.status||g)return void w();try{var e=JSON.parse(y.responseText);w(e)}catch(e){m(e)}}else{var t=function(e){var t=e.status+": "+e.statusText;if(!e.response)return t;try{var i=JSON.parse(e.response);return i.errors&&Array.isArray(i.errors)&&i.errors.length?i.errors.map((function(t){return(t.title||e.status)+": "+(t.detail||e.statusText)}))[0]:t}catch(i){return t}}(y);m(t)}},y.onerror=function(){m("An error occurred during the transaction")},y.send(n===ie.Post?JSON.stringify(o):void 0)}else m(new Error("Api url cannot be empty"))}(ne=ie=ie||{}).Get="GET",ne.Post="POST";var ue=function(e){var t=typeof e;return null!=e&&("object"==t||"function"==t)},he="undefined"!=typeof globalThis?globalThis:"undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof self?self:{},pe="object"==typeof he&&he&&he.Object===Object&&he,ge="object"==typeof self&&self&&self.Object===Object&&self,we=pe||ge||Function("return this")(),me=function(){return we.Date.now()},ve=we.Symbol,fe=Object.prototype,be=fe.hasOwnProperty,ye=fe.toString,Ie=ve?ve.toStringTag:void 0,ke=function(e){var t=be.call(e,Ie),i=e[Ie];try{var n=!(e[Ie]=void 0)}catch(e){}var r=ye.call(e);return n&&(t?e[Ie]=i:delete e[Ie]),r},_e=Object.prototype.toString,Ee=function(e){return _e.call(e)},Se=ve?ve.toStringTag:void 0,xe=function(e){return null==e?void 0===e?"[object Undefined]":"[object Null]":(Se&&Se in Object(e)?ke:Ee)(e)},Ce=/^\s+|\s+$/g,Oe=/^[-+]0x[0-9a-f]+$/i,Te=/^0b[01]+$/i,je=/^0o[0-7]+$/i,Re=parseInt,Be=function(e){if("number"==typeof e)return e;if(function(e){return"symbol"==typeof e||function(e){return null!=e&&"object"==typeof e}(e)&&"[object Symbol]"==xe(e)}(e))return NaN;if(ue(e)){var t="function"==typeof e.valueOf?e.valueOf():e;e=ue(t)?t+"":t}if("string"!=typeof e)return 0===e?e:+e;e=e.replace(Ce,"");var i=Te.test(e);return i||je.test(e)?Re(e.slice(2),i?2:8):Oe.test(e)?NaN:+e},De=Math.max,Ae=Math.min,Ne=function(e,t,i){var n=!0,r=!0;if("function"!=typeof e)throw new TypeError("Expected a function");return ue(i)&&(n="leading"in i?!!i.leading:n,r="trailing"in i?!!i.trailing:r),function(e,t,i){var n,r,o,s,a,d,c=0,l=!1,u=!1,h=!0;if("function"!=typeof e)throw new TypeError("Expected a function");function p(t){var i=n,o=r;return n=r=void 0,c=t,s=e.apply(o,i)}function g(e){var i=e-d;return void 0===d||t<=i||i<0||u&&o<=e-c}function w(){var e,i,n=me();if(g(n))return m(n);a=setTimeout(w,(i=t-((e=n)-d),u?Ae(i,o-(e-c)):i))}function m(e){return a=void 0,h&&n?p(e):(n=r=void 0,s)}function v(){var e,i=me(),o=g(i);if(n=arguments,r=this,d=i,o){if(void 0===a)return c=e=d,a=setTimeout(w,t),l?p(e):s;if(u)return clearTimeout(a),a=setTimeout(w,t),p(d)}return void 0===a&&(a=setTimeout(w,t)),s}return t=Be(t)||0,ue(i)&&(l=!!i.leading,o=(u="maxWait"in i)?De(Be(i.maxWait)||0,t):o,h="trailing"in i?!!i.trailing:h),v.cancel=function(){void 0!==a&&clearTimeout(a),n=d=r=a=void(c=0)},v.flush=function(){return void 0===a?s:m(me())},v}(e,t,{leading:n,maxWait:t,trailing:r})};function Me(){return"IntersectionObserver"in window&&"IntersectionObserverEntry"in window&&"intersectionRatio"in window.IntersectionObserverEntry.prototype}var Pe=(We.prototype.init=function(){var e=this;if(Me()){var t={root:null,rootMargin:"0px",threshold:this.threshold||1};this.intersectionObserver=new IntersectionObserver((function(t){t.forEach((function(t){t.isIntersecting&&t.intersectionRatio&&e.throttledCallback()}))}),t),this.observerElement&&this.intersectionObserver.observe(this.observerElement)}},We.prototype.destroy=function(){this.intersectionObserver&&this.observerElement&&(this.intersectionObserver.unobserve(this.observerElement),this.intersectionObserver=null,this.throttledCallback.cancel())},We);function We(e){var t=this,i=e.observerId,n=e.threshold,r=e.callback;this.throttledCallback=Ne((function(){t.callback(),t.destroy()}),1500,{leading:!1}),this.intersectionObserver=null,this.intersectionObserverElements=void 0,this.observerElement=document.querySelector("#"+i),this.threshold=n,this.callback=r}var Le="ainews_click_exclude_items_ids";function qe(){var e=sessionStorage.getItem(Le);return e?e.split(","):[]}function Ue(e){return Ge+"/widgets/"+e}function Fe(e){return Ue(e)+"/recommendations"}var Ve,He,ze,Je="/track/v1/widgets_events",Ge="/rec/v1",$e="widgetId",Ke="itemsIds",Qe="excludeItemsIds",Xe="events",Ye="eventType",Ze="breakpoints",et="recommendations";(He=Ve=Ve||{}).PublicationView="p_view",He.PublicationLike="p_like",He.WidgetShow="w_show",He.WidgetClick="w_click",He.WidgetEvents="w_events",He.ItemShow="i_show";var tt,it,nt,rt,ot=!(He.ItemClick="i_click"),st=(at.prototype.sendPublication=function(e){var t=this,i=e.eventType,n=e.itemId,o=e.projectId,s=e.url,a=e.observerId,d=e.lang;if(!n)return this.processError(G("itemId"));if(!d)return this.processError(G("lang"));function c(e){if(e===Ve.PublicationLike){if(ot)return t.processError("Event p_like had already sent");ot=!0,null!=ze&&ze.destroy()}return e===Ve.PublicationView&&(ot=!1),le({path:"/track/v1/event",queryObject:r({event_type:e,project_id:o||t.projectId,item_id:n,url:s,lang:d},t.userId&&{user_id:t.userId}),success:function(){e===Ve.PublicationView&&function(e){var t=sessionStorage.getItem(Le);if(t){if(!t.includes(e)){var i=t.split(",");10<=i.length&&i.shift(),sessionStorage.setItem(Le,i.concat(e).join(","))}}else sessionStorage.setItem(Le,e)}(n),t.processSuccess(e)},error:function(e){return t.processError(e)}})}return i===Ve.PublicationView&&a&&(null!=ze&&ze.destroy(),null!=(ze=new Pe({observerId:a,callback:function(){return c(Ve.PublicationLike)}}))&&ze.init()),c(i)},at.prototype.sendWidgetClick=function(e){var t=this,i=e.widgetId,n=e.itemId,o=e.positions,s=e.clickPosition,a=e.referrerItemId,d=e.eventType,c=e.urlType,l=e.teaserItemId;return i?n?le({path:"/track/v1/widgets_events/click",queryObject:r(r(r(r(r(r({widget_id:i,item_id:n},o&&{positions:o}),s&&{click_position:s}),a&&{referrer_item_id:a}),c&&{url_type:c}),l&&{teaser_item_id:l}),this.userId&&{user_id:this.userId}),success:function(){return t.processSuccess(d)},error:function(e){return t.processError(e)}}):this.processError(G("itemId")):this.processError(G($e))},at.prototype.sendWidgetShow=function(e){var t=this,i=e.widgetId,n=e.itemsIds;return i?n?Array.isArray(n)?n.length?(c(),le({path:"/track/v1/widgets_events/show",queryObject:r({widget_id:i,items_ids:n.join(",")},this.userId&&{user_id:this.userId}),success:function(){return t.processSuccess(Ve.WidgetShow)},error:function(e){return t.processError(e)}})):this.processError(O(Ke)):this.processError(C(Ke)):this.processError(G(Ke)):this.processError(G($e))},at.prototype.sendWidgetEvents=function(e){var t,i=this,n=e.widgetId,o=e.events,s=e.eventReason;if(!n)return this.processError(G($e));if(!o)return this.processError(G(Xe));if(!Array.isArray(o))return this.processError(C(Xe));if(!o.length)return this.processError(O(Xe));if(o.some((function(e){return!e.type||-1===[Ve.WidgetShow,Ve.WidgetClick,Ve.ItemClick,Ve.ItemShow].indexOf(e.type)})))return this.processError('Property "events" must be an array of objects with property "type" or property "type" is invalid');function a(){le({method:ie.Post,path:Je,body:u,success:function(){return i.processSuccess(Ve.WidgetEvents)},error:function(e){return i.processError(e)}})}o.some((function(e){return e.type===Ve.WidgetShow}))&&c();var d=o.map((function(e){return r(r(r(r(r(r({type:null==e?void 0:e.type},(null==e?void 0:e.itemId)&&{item_id:e.itemId}),(null==e?void 0:e.projectId)&&{project_id:e.projectId}),(null==e?void 0:e.positions)&&{positions:e.positions}),(null==e?void 0:e.clickPosition)&&{click_position:e.clickPosition}),(null==e?void 0:e.urlType)&&{url_type:e.urlType}),(null==e?void 0:e.teaserItemId)&&{teaser_item_id:e.teaserItemId})})),l=null===(t=document.querySelector('meta[property="aiturec:item_id"]'))||void 0===t?void 0:t.getAttribute("content"),u=r({widget_id:n,widget_group_id:window.ainewsClickData.widgetsById[n].widget_group_id,referrer_item_id:l,events:d},this.userId&&{user_id:this.userId});return"click"===s?function(e){var t,i=e.path,n=e.body,r=e.success,o=e.fallBack,s=e.error;if("sendBeacon"in navigator)if(null!==(t=window.ainewsClickData)&&void 0!==t&&t.apiUrl)if(n&&Object.keys(n).length){var a=""+window.ainewsClickData.apiUrl+i;(navigator.sendBeacon(a,JSON.stringify(n))?r:o)()}else s(new Error("sendBeacon should have a body"));else s(new Error("Api url cannot be empty"));else o()}({path:Je,body:u,success:function(){return i.processSuccess(Ve.WidgetEvents)},fallBack:function(){return a()},error:function(e){return i.processError(e)}}):a()},at.prototype.processSuccess=function(e){this.onSuccess(),h(K(this.commandName)),l(e===Ve.WidgetEvents?"Events sent successfully":'Event "'+e+'" sent successfully'),p(2)},at.prototype.processError=function(e){this.onError(e),p(),h(K(this.commandName)),u(e),p(2)},at);function at(e){var t=e.userId,i=e.commandName,n=e.onSuccess,r=e.onError;this.userId=t,this.projectId=window.ainewsClickData.projectId,this.commandName=i,this.onSuccess=n,this.onError=r}function dt(e){var t=e.message,i=e.title,n=e.isThrowError,r=void 0!==n&&n,o=e.callback;null!=o&&o(r?new Error(t):t),p(),i&&h(i),u(t),p(i?2:1)}function ct(e){var t=e.windowWidth,i=e.breakpoints;return t&&i&&i.length?1===i.length?i[0]:i.sort((function(e,t){return e.width-t.width})).map((function(e,t){return r(r({},e),{width:e.width,count:e.columns*e.rows,minWidth:e.width,maxWidth:t===i.length-1?1e5:i[t+1].width-1})})).find((function(e){return e.minWidth<=t&&t<=e.maxWidth}))||null:null}function lt(e){var t=e.id,i=e.type,n=e.urlType,o=e.projectId,s=e.teaserItemId,a=e.positions,d=e.clickPosition,c=r(r(r(r(r({id:t,type:i},n&&{urlType:n}),o&&{projectId:o}),s&&{teaserItemId:s}),a&&{positions:a}),d&&{clickPosition:d});return JSON.stringify(c)}(it=tt=tt||{}).WidgetLoad="widgetLoad",it.WidgetShow="widgetShow",(rt=nt=nt||{}).WidgetClick="widget_click",rt.WidgetShow="widget_show",rt.WidgetLoad="widget_load",rt.WidgetRendered="widget_rendered";var ut={root:null,rootMargin:"0px"},ht=(Object.defineProperty(pt.prototype,"eventsForSend",{get:function(){var e=this;return this.events?Object.keys(this.events).filter((function(t){var i;return!(null!==(i=e.events)&&void 0!==i&&i[t])})):[]},enumerable:!1,configurable:!0}),Object.defineProperty(pt.prototype,"eventsSendedCount",{get:function(){var e=this;return this.events?Object.keys(this.events).filter((function(t){var i;return null===(i=e.events)||void 0===i?void 0:i[t]})).length:0},enumerable:!1,configurable:!0}),Object.defineProperty(pt.prototype,"recommendationsCountForCurrentBreakpoint",{get:function(){var e;if(!this.currentBreakpoint)return 0;var t=this.currentBreakpoint.rows*this.currentBreakpoint.columns;return(null===(e=this.recommendations)||void 0===e?void 0:e.slice(0,t).length)||0},enumerable:!1,configurable:!0}),pt.prototype.getRecommendationProjectId=function(e){var t=this.recommendations.find((function(t){return t.item_id===e}));return(null==t?void 0:t.project_id)||""},pt.prototype.observe=function(e){var t,i=e.userId,n=e.breakpoints,r=e.recommendations,o=e.commandName;if(this.userId=i,this.breakpoints=n,this.recommendations=r,this.commandName=o,this.currentBreakpoint=ct({windowWidth:window.innerWidth,breakpoints:n}),this.currentBreakpoint)if(this.element=document.querySelector("["+T+'="'+this.widgetId+'"]'),this.element){var s=this.element.getBoundingClientRect().height;s?this.currentBreakpoint?(this.elementHeight=s,this.windowHeight=window.innerHeight,this.isIntersectionObserverSupported||(this.rows=function(e){var t=e.elementHeight,i=e.rows,n=e.columns,r=e.indentRows,o=e.rowViewCoef,s=e.recommendations.map((function(e){return{itemId:e.item_id,teaserItemId:e.teaser_item_id,urlType:e.url_type}}));if(i<=1)return[{rowNumber:1,percent:100*o,itemsSendingFields:s.slice(0,i*n)}];for(var a=Math.floor(r/t*100),d=Math.floor((100-a*(i-1))/i),c=[],l=0;l<i;l+=1){var u=d*o+d*l+a*l;c.push({rowNumber:l+1,percent:u,itemsSendingFields:s.slice(l*n,l*n+n)})}return c}({elementHeight:this.elementHeight,rows:this.currentBreakpoint.rows,columns:this.currentBreakpoint.columns,indentRows:this.currentBreakpoint.indentRows,recommendations:this.recommendations,rowViewCoef:.5})),null!==(t=this.element)&&void 0!==t&&t.addEventListener("click",this.handleClick),this.addResizeObserver(),this.addPositionObserver(),this.onSuccess("Observer for widget has been successfully installed")):this.processError("Failed to get settings for current breakpoint"):this.processError("Failed to get height for recommendation list")}else this.processError("Not found DOM element with id "+T+'="'+this.widgetId+'"');else this.processError("Not found settings for current breakpoint")},pt.prototype.addResizeObserver=function(){var e;1!==(null===(e=this.breakpoints)||void 0===e?void 0:e.length)&&window.addEventListener("resize",this.handleResize)},pt.prototype.addPositionObserver=function(){this.isIntersectionObserverSupported?(this.createItemsIntersectionObserver(),this.createContainerIntersectionObserver()):(window.addEventListener("scroll",this.handleScroll),this.handleScroll())},pt.prototype.createContainerIntersectionObserver=function(){var e=this;this.element&&new IntersectionObserver((function(t,i){t.forEach((function(t){t.isIntersecting&&t.intersectionRatio&&(te(tt.WidgetShow),ae({eventName:nt.WidgetShow,widgetId:e.widgetId}),i.unobserve(t.target),i.disconnect())}))}),ut).observe(this.element)},pt.prototype.createItemsIntersectionObserver=function(){var e,t,i=this,n=1;if(this.windowHeight&&this.elementHeight&&this.currentBreakpoint){var o=this.currentBreakpoint,s=o.rows,a=o.indentRows,d=Math.floor(this.elementHeight-(s-a)/s);n=this.windowHeight>d?1:this.windowHeight/d}var c=r(r({},ut),{threshold:.5*n});this.intersectionObserver=new IntersectionObserver((function(e){e.forEach((function(e){var t,n,o,s,a,d;if(e.isIntersecting&&e.intersectionRatio){var c=lt({id:i.widgetId,type:Ve.WidgetShow});null!==(o=i.events)&&void 0!==o&&o[c]||(i.events=r(r({},i.events),((t={})[c]=!1,t)));var l=e.target.getAttribute(R),u=e.target.getAttribute(D),h=e.target.getAttribute(A);if(l){var p=i.getRecommendationProjectId(l),g=lt(r(r(r({id:l,type:Ve.ItemShow},h&&{urlType:h}),p&&{projectId:p}),u&&{teaserItemId:u}));null!==(s=i.events)&&void 0!==s&&s[g]?null!==(a=i.intersectionObserver)&&void 0!==a&&a.unobserve(e.target):(i.events=r(r({},i.events),((n={})[g]=!1,n)),null!==(d=i.intersectionObserver)&&void 0!==d&&d.unobserve(e.target),i.eventsForSend.length&&i.sendEventsThrottled())}}}))}),c),this.intersectionObserverElements=null===(e=this.element)||void 0===e?void 0:e.querySelectorAll("["+R+"]"),null!==(t=this.intersectionObserverElements)&&void 0!==t&&t.forEach((function(e){var t;null!==(t=i.intersectionObserver)&&void 0!==t&&t.observe(e)}))},pt.prototype.handleClick=function(e){var t=e.target,i=t.closest("["+R+"]");if(i){var n=i.getAttribute(R),r=i.getAttribute(D),o=i.getAttribute(A);if(n){var s=t.closest("["+T+"]");if(s){var a=s.querySelectorAll("["+R+"]"),d=a.length,c=Array.prototype.slice.call(a).indexOf(i)+1,l=new URL(i.getAttribute("href")||"").hostname,u=window.ainewsClickData.widgetsById[this.widgetId].widgetRenderTemplate;ae({eventName:nt.WidgetClick,widgetId:this.widgetId,dimensions:{exchange_domain:l,exchange_project_id:r||"",click_position:c,click_type:u[c-1]}}),n.includes("ad-")||this.sendClickEvent({itemId:n,projectId:this.widgetProjectId,urlType:o||"",teaserItemId:r||"",positions:d,clickPosition:c})}}}},pt.prototype.handleScroll=function(){var e,t,i,n=this;if(this.element&&null!==(t=this.rows)&&void 0!==t&&t.length){var o=window.innerHeight,s=window.scrollY||window.pageYOffset,a=this.element.getBoundingClientRect(),d=a.height,c=a.top,l=function(e){var t=e.viewportTop,i=e.viewportBottom,n=e.elementTop,r=e.elementBottom;if(!(t<r&&n<i))return 0;if(r<i)return 100;var o=r-n;return t<n&&r<i?100:n<t&&r<i?Math.round((r-t)/o*100):t<n&&i<r||n<=t&&i<=r?Math.round((i-n)/o*100):0}({viewportTop:s,viewportBottom:s+o,elementTop:s+c,elementBottom:s+c+d});if(l){this.hasBeenShown||(te(tt.WidgetShow),ae({eventName:nt.WidgetShow,widgetId:this.widgetId}),this.hasBeenShown=!0);var u=lt({id:this.widgetId,type:Ve.WidgetShow});1<l&&(null===(i=this.events)||void 0===i||!i[u])&&(this.events=r(r({},this.events),((e={})[u]=!1,e))),this.rows.forEach((function(e){l<=e.percent||e.itemsSendingFields.length&&e.itemsSendingFields.forEach((function(e){var t,i,o=n.getRecommendationProjectId(e.item_id),s=lt(r(r(r({id:e.item_id,type:Ve.ItemShow},e.urlType&&{urlType:e.urlType}),e.teaserItemId&&{teaserItemId:e.teaserItemId}),o&&{projectId:o}));null!==(i=n.events)&&void 0!==i&&i[s]||(n.events=r(r({},n.events),((t={})[s]=!1,t)))}))})),this.eventsForSend.length&&this.sendEventsThrottled(),100!==l||this.eventsForSend.length||1!==this.breakpoints.length||this.destroyPositionObserver()}}},pt.prototype.handleResize=function(){var e,t=ct({windowWidth:window.innerWidth,breakpoints:this.breakpoints});t?JSON.stringify(t)!==JSON.stringify(this.currentBreakpoint)&&(null!==(e=this.onBreakpointChange)&&void 0!==e&&e.call(this,t),this.destroyPositionObserver()):this.processError("Failed to get settings for new breakpoint")},pt.prototype.sendClickEvent=function(e){var t,i=e.itemId,n=e.urlType,o=e.teaserItemId,s=e.positions,a=e.clickPosition,d=e.projectId,c=lt(r(r(r(r(r({id:i,type:Ve.ItemClick},n&&{urlType:n}),d&&{projectId:d}),o&&{teaserItemId:o}),s&&{positions:s}),a&&{clickPosition:a}));this.events=r(r({},this.events),((t={})[c]=!1,t)),this.sendEvents("click")},pt.prototype.sendEvents=function(e){if(this.events&&this.eventsForSend.length){var t=this.eventsForSend.map((function(e){var t=JSON.parse(e),i=t.id,n=t.type,o=t.urlType,s=t.projectId,a=t.teaserItemId,d=t.positions,c=t.clickPosition;return"w_show"===n?{type:n}:r(r(r(r(r({type:n,itemId:i},o&&{urlType:o}),s&&{projectId:s}),a&&{teaserItemId:a}),d&&{positions:Number(d)}),c&&{clickPosition:Number(c)})})),i=Z({service:"event",args:["w_events",{widgetId:this.widgetId,userId:this.userId,events:t}]});h($(i)),new st({userId:this.userId,commandName:i,onSuccess:function(){},onError:function(){}}).sendWidgetEvents({widgetId:this.widgetId,events:t,eventReason:e});var n=this.eventsForSend.reduce((function(e,t){var i;return r(r({},e),((i={})[t]=!0,i))}),this.events);this.events=r(r({},this.events),n),(this.eventsSendedCount>=this.recommendations.length+1||this.eventsSendedCount>=this.recommendationsCountForCurrentBreakpoint+1)&&this.destroyPositionObserver()}},pt.prototype.destroyPositionObserver=function(){var e,t=this;window.removeEventListener("scroll",this.handleScroll),this.intersectionObserver&&(this.intersectionObserver.disconnect?this.intersectionObserver.disconnect():null!==(e=this.intersectionObserverElements)&&void 0!==e&&e.forEach((function(e){var i;null!==(i=t.intersectionObserver)&&void 0!==i&&i.unobserve(e)})),this.intersectionObserver=null)},pt.prototype.destroyResizeObserver=function(){var e;1!==(null===(e=this.breakpoints)||void 0===e?void 0:e.length)&&window.removeEventListener("resize",this.handleResize)},pt.prototype.destroy=function(){this.events&&this.eventsForSend.length&&this.sendEvents(),this.events=null,this.rows=null,window.removeEventListener("click",this.handleClick),this.destroyResizeObserver(),this.destroyPositionObserver(),this.element&&(this.element=null)},pt.prototype.processError=function(e){this.onError(e),this.destroy()},pt);function pt(e){var t=e.widgetId,i=e.onSuccess,n=e.onBreakpointChange,r=e.onError;this.widgetId=t,this.widgetProjectId=window.ainewsClickData.projectId,this.userId=void 0,this.breakpoints=[],this.recommendations=[],this.commandName="",this.element=null,this.currentBreakpoint=null,this.windowHeight=0,this.elementHeight=0,this.intersectionObserver=null,this.intersectionObserverElements=void 0,this.isIntersectionObserverSupported=Me(),this.hasBeenShown=!1,this.events=null,this.rows=null;var o=window.ainewsClickData.widgetsById[this.widgetId],s=o.lang,a=o.kind;this.domain=window.location.hostname,this.lang=s,this.widgetType=a,this.ainewsClickId=k(N),this.handleClick=this.handleClick.bind(this),this.handleScroll=Ne(this.handleScroll.bind(this),100),this.handleResize=Ne(this.handleResize.bind(this),500),this.sendEventsThrottled=Ne(this.sendEvents.bind(this),2e3,{leading:!1}),this.onSuccess=i,this.onBreakpointChange=n,this.onError=r}var gt,wt,mt,vt,ft,bt,yt,It,kt={.5625:[{width:64,height:36},{width:80,height:45},{width:96,height:54},{width:160,height:90},{width:208,height:117},{width:256,height:144},{width:304,height:171},{width:320,height:180},{width:400,height:225},{width:512,height:288},{width:608,height:342},{width:768,height:432},{width:1024,height:576},{width:1440,height:810}],.75:[{width:52,height:39},{width:80,height:60},{width:100,height:75},{width:152,height:114},{width:200,height:150},{width:252,height:189},{width:300,height:225},{width:320,height:240},{width:400,height:300},{width:500,height:375},{width:600,height:450},{width:768,height:576},{width:1024,height:768},{width:1440,height:1080}],1:[{width:50,height:50},{width:80,height:80},{width:100,height:100},{width:150,height:150},{width:200,height:200},{width:250,height:250},{width:300,height:300},{width:320,height:320},{width:400,height:400},{width:500,height:500},{width:600,height:600},{width:600,height:600},{width:768,height:768},{width:768,height:768},{width:1024,height:1024},{width:1440,height:1440}],1.25:[{width:39,height:52},{width:60,height:80},{width:75,height:100},{width:114,height:152},{width:150,height:200},{width:189,height:252},{width:225,height:300},{width:240,height:320},{width:300,height:400},{width:375,height:500},{width:450,height:600},{width:576,height:768},{width:768,height:1024},{width:1080,height:1440}],1.777:[{width:36,height:64},{width:45,height:80},{width:54,height:96},{width:90,height:160},{width:117,height:208},{width:144,height:256},{width:171,height:304},{width:180,height:320},{width:225,height:400},{width:288,height:512},{width:342,height:608},{width:432,height:768},{width:576,height:1024},{width:810,height:1440}]};function _t(e){var t,i,n=e.id,o=e.data,s=o.assets.reduce((function(e,t,i){return 0===i&&t.data?r(r({},e),{description:t.data.value}):t.title?r(r({},e),{title:t.title.text}):t.img?r(r({},e),{img:t.img.url}):e}),{});return r(r({id:n},s),{url:null===(t=null==o?void 0:o.link)||void 0===t?void 0:t.url,clicktrackers:null===(i=null==o?void 0:o.link)||void 0===i?void 0:i.clicktrackers,imptrackers:null==o?void 0:o.imptrackers,eventtrackers:null==o?void 0:o.eventtrackers})}(wt=gt=gt||{}).Ad="ad",wt.Rec="rec",wt.RequiredRec="required_rec",wt.Teaser="teaser",(vt=mt=mt||{}).GetRecs="getRecs",vt.GetInfo="getInfo",vt.Render="render",vt.Observe="observe",vt.Unobserve="unobserve",(bt=ft=ft||{}).Recommendation="recommendation",bt.Traffic="traffic",(It=yt=yt||{}).Blacklabel="https://cdn.admixer.net/scripts3/loader2.js",It.Whitelabel="https://scripts.adtech.kz/scripts3/loader2.js";var Et=(St.prototype.init=function(e,t){var i,n,r,o=this;this.sender=e||"admixer";var s="//inv-nets.admixer.net/",a=!(null===(n=null===(i=window.admixerML)||void 0===i?void 0:i.partners)||void 0===n||!n.addPartner),d=function(){var e,t;null!==(t=null===(e=window.admixerML)||void 0===e?void 0:e.partners)&&void 0!==t&&t.addPartner({name:o.sender,inv:s,requestType:"native"})},c=document.querySelector('[src="'+yt.Blacklabel+'"]')||document.querySelector('[src="'+yt.Whitelabel+'"]');c?a?(d(),null!=t&&t()):c.onload=function(){d(),null!=t&&t()}:(this.script.src=yt.Blacklabel,this.script.setAttribute("data-sender",this.sender),this.script.setAttribute("data-inv",s),this.script.setAttribute("data-r","single"),this.script.setAttribute("data-response-type","native"),this.script.setAttribute("data-bundle","desktop"),this.script.async=!0,this.script.onload=function(){null!=t&&t()},null!==(r=document.querySelector("head"))&&void 0!==r&&r.appendChild(this.script))},St.prototype.render=function(e){var t=this,i=e.adSlots,n=e.userId;return(window.globalAmlAds=window.globalAmlAds||[]).push((function(){var e;null!==(e=window.globalAml)&&void 0!==e&&e.defineId("ainewsclick",n)})),i.forEach((function(e){(window.globalAmlAds=window.globalAmlAds||[]).push((function(){var i;null!==(i=window.globalAml)&&void 0!==i&&i.defineSlot({z:e.z,ph:e.ph,s:e.s,i:e.i,sender:e.sender,responseType:"native",noBannerCallback:function(i){h("admixer called render",!1),l("admixer noBannerCallback",i),p(2),i&&"1.2"===i.ver&&i.imptrackers&&i.assets&&i.link&&t.onRender(_t({id:e.ph,data:i}))},responseCallback:function(i){h("admixer called render",!1),l("admixer responseCallback",i),p(2),t.onRender(_t({id:e.ph,data:i}))},renderedCallback:function(e){h("admixer called render",!1),l("admixer renderedCallback",e),p(2),null!=e&&e.codeJSON||window.globalAml.clear(e.phId)}})})),(window.globalAmlAds=window.globalAmlAds||[]).push((function(){var t;null!==(t=window.globalAml)&&void 0!==t&&t.display(e.ph)}))})),(window.globalAmlAds=window.globalAmlAds||[]).push((function(){var e;null!==(e=window.globalAml)&&void 0!==e&&e.singleRequest(t.sender)})),this},St.prototype.sendEvent=function(e){return le({barePath:e,withoutResponse:!0,success:function(){h("admixer called sendEvent",!1),l("success",e),p(2)},error:function(){h("admixer called sendEvent",!1),u("error",e),p(2)}}),this},St.prototype.destroy=function(e){return e.forEach((function(e){(window.globalAmlAds=window.globalAmlAds||[]).unshift(e.ph)})),h("admixer called destroy",!1),l("destroy",e),p(2),this},St);function St(e){this.script=document.createElement("script"),this.sender="admixer",this.onRender=e}var xt="https://medialib.b2b.ainews.kz/constructor-not-found-image.jpg",Ct={1:.1,2:.5,3:1},Ot=(Object.defineProperty(Tt.prototype,"getAdvCaption",{get:function(){switch(this.widgetLang){case"ru":return"Реклама";case"kk":return"Жарнама";case"en":return"Ad";default:return"Реклама"}},enumerable:!1,configurable:!0}),Object.defineProperty(Tt.prototype,"getTeaserCaption",{get:function(){switch(this.widgetLang){case"ru":return"Публикация партнера";case"kk":return"Серіктес жарияланымы";case"en":return"Partner publication";default:return"Публикация партнера"}},enumerable:!1,configurable:!0}),Object.defineProperty(Tt.prototype,"getImageQuery",{get:function(){if(!this.currentBreakpoint||!this.widgetElement)return"";var e=this.currentBreakpoint,t=e.widgetWidth,i=e.columns,n=e.indentColumns,r=e.imageAspectRatio,o=this.widgetElement.clientWidth;return i&&n&&r&&o?function(e){var t=Math.round(e.widgetDivWidth*(e.widgetWidth/100)/e.columns-e.indentColumns/2),i=kt[e.imageAspectRatio],n=function(e,t){var i=e.length-1,n=0,r=i;if(t>e[i])return i;if(t<e[0])return 0;for(;n<=r;){var o=Math.floor((n+r)/2),s=e[o];if(s===t)return o;if(e[o+1]>t&&e[o]<t)return o+1;t<s&&(r=o-1),s<t&&(n=o+1)}return-1}(i.map((function(e){return e.width})),t);if(-1===n)return"";var r=i[n];return"?size="+r.width+"x"+r.height+"&gravity=center"}({widgetWidth:t||100,widgetDivWidth:o,columns:i,indentColumns:n,imageAspectRatio:r}):""},enumerable:!1,configurable:!0}),Tt.prototype.getCutTitle=function(e){return e.length>this.titleMaxLength?(null==e?void 0:e.substring(0,this.titleMaxLength-3))+"...":e},Tt.prototype.init=function(e){var t,i=e.userId,n=e.divId,r=e.titleSettings,o=e.breakpoints,s=e.currentBreakpoint,a=e.styles,d=e.widgetMainClass,c=e.recommendations,l=e.commandName;this.userId=i,this.divId=n,this.titleText=null==r?void 0:r.text,this.breakpoints=o,this.currentBreakpoint=s||ct({windowWidth:window.innerWidth,breakpoints:o}),this.isTitleDisabled=null===(t=this.currentBreakpoint)||void 0===t?void 0:t.isTitleDisabled,this.styles=a,d&&(this.widgetMainClass=d),this.recommendations=c,this.commandName=l,this.widgetElement=document.getElementById(n)},Tt.prototype.build=function(){var e,t=this;this.widgetElement&&void 0!==this.widgetElement?(this.addStyles(),this.addMarkup(),setTimeout((function(){var e,i,n,r;null!==(e=t.adSlots)&&void 0!==e&&e.length&&(t.isAdmixerScriptReady?null!==(i=t.admixer)&&void 0!==i&&i.render({adSlots:t.adSlots,userId:t.userId||window.aiturecSharedData.uid||""}):null!==(n=t.admixer)&&void 0!==n&&n.init(null===(r=t.adSlots.find((function(e){return null==e?void 0:e.sender})))||void 0===r?void 0:r.sender,(function(){var e;null!==(e=t.admixer)&&void 0!==e&&e.render({adSlots:t.adSlots,userId:t.userId||window.aiturecSharedData.uid||""}),t.isAdmixerScriptReady=!0})))}),0),null!==(e=this.widgetObserver)&&void 0!==e&&e.observe({userId:this.userId,breakpoints:this.breakpoints,recommendations:this.recommendations,commandName:this.commandName}),this.onSuccess("Widget rendered successfully")):this.processError('Not found DOM element with id "'+this.divId+'"')},Tt.prototype.addStyles=function(){var e=document.querySelector("["+j+'="'+this.widgetId+'"]'),t="position: absolute; z-index: -100; display: block; width: 0; height: 0; visibility: hidden; opacity: 0; overflow: hidden;";if(!e||void 0===e){var i=document.createElement("style");return i.type="text/css",i.setAttribute(j,this.widgetId),i.appendChild(document.createTextNode(this.styles+" .aiturec-widget li["+B+"='"+gt.Ad+"'] .aiturec-widget__pixel { "+t+" }")),void document.head.appendChild(i)}e&&e.textContent!==this.styles&&(e.textContent=this.styles+" .aiturec-widget__pixel { "+t+" }")},Tt.prototype.addMarkup=function(){var e,t=this;this.adSlots=[];var i=this.widgetKind!==ft.Traffic,n=this.recommendations.map((function(e){var n,r="recommendation"===e.url_type;return null!=e&&e.ad_slot&&Object.keys(e.ad_slot)&&null!==(n=t.adSlots)&&void 0!==n&&n.push(e.ad_slot),'\n        <li\n          class="'+t.widgetMainClass+'__item"\n          '+(e.ad_slot?B+'="'+gt.Ad+'"':"")+'\n        >\n          <a\n            class="'+t.widgetMainClass+'__recommendation"\n            href="'+e.url+'"\n            '+R+'="'+e.item_id+'"\n            '+(e.teaser_item_id?D+'="'+e.teaser_item_id+'"':"")+"\n            "+(e.url_type?A+'="'+e.url_type+'"':"")+'\n          >\n            <span\n              class="'+t.widgetMainClass+'__recommendation-image"\n              style="background-image:url('+(e.image_url||xt)+(r?t.getImageQuery:"")+')"\n            >\n            </span>\n\n            <div>\n              <span class="'+t.widgetMainClass+'__recommendation-title">'+t.getCutTitle(e.title)+"</span>\n\n              "+(!r&&i?'\n                <span class="'+t.widgetMainClass+'__recommendation-caption">\n                  '+t.getTeaserCaption+"\n                </span>\n              ":"")+"\n            </div>\n          </a>\n\n          "+(e.ad_slot?'\n            <div\n              class="aiturec-widget__pixel"\n              id="'+e.ad_slot.ph+'"\n              data-sender="'+e.ad_slot.sender+'"\n            >\n            </div>\n          ':"")+"\n        </li>\n      "})).join(""),r="\n      "+(this.titleText&&!this.isTitleDisabled?'<h3 class="'+this.widgetMainClass+'__title">'+this.titleText+"</h3>":"")+'\n\n      <ul class="'+this.widgetMainClass+'" '+(null!==(e=this.widgetElement)&&void 0!==e&&e.hasAttribute(T)?"":T+'="'+this.widgetId+'"')+'">\n        '+n+'\n      </ul>\n\n      <div class="'+this.widgetMainClass+'__caption">\n        Developed by\n        <a\n          class="'+this.widgetMainClass+'__caption-link"\n          href="https://www.ainewsb2b.kz/?utm_source=ainews_widget"\n          target="_blank"\n          rel="nofollow noopener"\n        >\n          Ainews&nbsp;for&nbsp;business\n        </a>\n      </div>\n    ';this.widgetElement&&void 0!==this.widgetElement?this.widgetElement.innerHTML=r:this.processError('Not found DOM element with id "'+this.divId+'"')},Tt.prototype.adsRender=function(e){var t,i,n,r,o=this,s=null===(t=document.getElementById(""+e.id))||void 0===t?void 0:t.parentElement;if(s&&(s.style.margin="0",s.innerHTML='\n      <a\n        id="'+e.id+'"\n        href="'+e.url+'"\n        target="_blank"\n        rel="nofollow noopener"\n        class="'+this.widgetMainClass+'__recommendation"\n        '+R+'="ad-'+e.id+'"\n      >\n        <span class="'+this.widgetMainClass+'__recommendation-image" style="background-image:url('+(e.img||xt)+')"></span>\n\n        <div>\n          <span class="'+this.widgetMainClass+'__recommendation-title">\n            '+this.getCutTitle(e.title||"")+'\n          </span>\n\n          <span class="'+this.widgetMainClass+'__recommendation-caption">'+this.getAdvCaption+"</span>\n        </div>\n      </a>\n      "+(null===(i=e.imptrackers)||void 0===i?void 0:i.map((function(e){return'\n        <img src="'+e+'" class="aiturec-widget__pixel">\n      '})).join(""))+"\n    ",h("adsRender",!1),l("ad rendered"),p(2),null!=s&&s.addEventListener("click",(function(){var t;null!==(t=e.clicktrackers)&&void 0!==t&&t.forEach((function(e){var t;null!==(t=o.admixer)&&void 0!==t&&t.sendEvent(e)}))})),null!==(n=e.eventtrackers)&&void 0!==n&&n.length)){var a,d=e.eventtrackers.reduce((function(e,t){return e+'<img src="'+t.url+'" class="aiturec-widget__pixel">'}),"");this.observer=new Pe({observerId:e.id,threshold:3<(a=e.eventtrackers[0].event)||a<=0?1:Ct[a],callback:function(){s.insertAdjacentHTML("beforeend",d),h("adsRender",!1),l("added pixel"),p(2)}}),null!==(r=this.observer)&&void 0!==r&&r.init()}},Tt.prototype.deleteMarkup=function(){this.widgetElement&&(this.widgetElement.innerHTML="")},Tt.prototype.destroy=function(){var e,t,i;null!==(e=this.observer)&&void 0!==e&&e.destroy(),null!==(t=this.widgetObserver)&&void 0!==t&&t.destroy(),this.adSlots&&null!==(i=this.admixer)&&void 0!==i&&i.destroy(this.adSlots),this.adSlots=[]},Tt.prototype.processError=function(e){this.onError(e),this.destroy()},Tt);function Tt(e){var t=this,i=e.widgetId,n=e.onSuccess,r=e.onBreakpointChange,o=e.onError;this.widgetId=i;var s=window.ainewsClickData.widgetsById[this.widgetId];this.widgetLang=s.lang,this.widgetKind=s.kind,this.userId=void 0,this.divId="",this.titleText="",this.isTitleDisabled=!0,this.breakpoints=[],this.currentBreakpoint=null,this.styles="",this.isAdmixerScriptReady=!1,this.widgetMainClass="aiturec-widget",this.recommendations=[],this.commandName="",this.adSlots=[],this.titleMaxLength=60,this.widgetElement=null,this.admixer=s.is_admixer_enabled?new Et(this.adsRender.bind(this)):null,this.onSuccess=n,this.onBreakpointChange=r,this.onError=o,this.widgetObserver=new ht({widgetId:i,onSuccess:function(){},onBreakpointChange:function(e){var i;t.recommendations=[],t.deleteMarkup(),null!==(i=t.onBreakpointChange)&&void 0!==i&&i.call(t,e),t.destroy()},onError:o}),this.observer=null}function jt(){var e=localStorage.getItem(Dt)||"{}",t=JSON.parse(e);if(Date.now()<t.expires)return t.value;localStorage.removeItem(Dt)}function Rt(e,t){return new Promise((function(i){le({path:Ge+"/users/"+e+"/segments",queryObject:{project_id:t},success:function(e){var t=e.data;i(t)},error:function(e){u(e),i([])}})}))}function Bt(e,t){return o(void 0,void 0,void 0,(function(){var i;return s(this,(function(n){switch(n.label){case 0:return(i=jt())?[3,2]:[4,Rt(e,t)];case 1:(function(e){void 0===e&&(e=[]);var t=e.reduce((function(e,t){var i=t.attributes;return i.path.includes("geo.")&&e.push(i.dmp_id),e}),[]);if(t.length){var i=t.join(",");localStorage.setItem(Dt,JSON.stringify({value:i,expires:Date.now()+864e5}))}})(n.sent()),i=jt(),n.label=2;case 2:return[2,i]}}))}))}var Dt="ainews_click_geo_segment_ids";function At(e){return Array.from(Array(e).keys()).map((function(e){return{item_id:""+e,image_url:"https://picsum.photos/id/"+(500+e)+"/500/500",title:"Lorem ipsum dolor sit amet, consectetur adipiscing elit, sed do eiusmod tempor incididunt ut labore et dolore magna aliqua. Ut enim ad minim veniam, quis nostrud exercitation".substring(0,(30,100,Math.floor(71*Math.random()+30))),url:"http://localhost:7050/post/"+(500+e)}}))}var Nt="ainews_click_widget_iterations",Mt=(Pt.prototype.getInfo=function(e){var t=e.onSuccess,i=e.onError;return le({path:Ue(this.widgetId),queryObject:r({},this.userId&&{user_id:this.userId}),queryObjectForLogger:r({widget_id:this.widgetId},this.userId&&{user_id:this.userId}),success:function(e){return t(r({id:e.data.id},e.data.attributes))},error:function(e){return i(e)}})},Pt.prototype.getRecs=function(e){var t=e.count,i=e.excludeItemsIds,n=e.excludeCurrent,o=e.onSuccess,s=e.onError;if(!t)return s('Property "count" cannot be empty');if("number"!=typeof t)return s('Property "count" should be a number');if(i&&!Array.isArray(i))return s(C(Qe));if(i&&!i.length)return s(O(Qe));var a=S(),d=x(),c=r(r(r({count:t,is_adult:d,exclude_items_ids:qe().concat(i||[])},a&&{referrer_item_id:a}),n&&{exclude_current:n}),this.userId&&{user_id:this.userId});return le({path:Fe(this.widgetId),queryObject:c,queryObjectForLogger:r(r({},c),{widget_id:this.widgetId}),success:function(e){var t,i=e.data.map((function(e){return r({},e.attributes)}));return null!==(t=e.included)&&void 0!==t&&t[0]&&r({id:e.included[0].id},e.included[0].attributes)?o(i):s(z)},error:function(e){return"development"===window.ainewsClickData.appEnv?o(At(t)):s(e)}})},Pt.prototype.render=function(e){var t=this,i=e.excludeItemsIds,n=e.excludeCurrent,a=e.commandName,d=e.widgetsCount,c=e.widgetIndex,l=e.onSuccess,u=e.onError;if(i&&!Array.isArray(i))return u(C(Qe));if(i&&!i.length)return u(O(Qe));var h,p,g,w,m,v=S(),f=x(),b=r(r(r(r({exclude_items_ids:qe().concat(i||[]),is_adult:f,iter:(h=this.widgetId,g=localStorage.getItem(Nt)||"{}",w=JSON.parse(g),m=w[h],p=void 0===m?0:m+1,w[h]=p,localStorage.setItem(Nt,JSON.stringify(w)),p)},v&&{referrer_item_id:v}),n&&{exclude_current:n}),void 0!==d&&{widgets_count:d}),void 0!==c&&{widget_index:c}),y=function(){return o(t,void 0,void 0,(function(){var e,t,i=this;return s(this,(function(n){switch(n.label){case 0:return[4,Bt(this.userId,this.projectId)];case 1:return e=n.sent(),t=r(r(r(r({},this.currentBreakpoint&&{breakpoint_id:this.currentBreakpoint.id}),this.userId&&{user_id:this.userId}),b),{geo_ids:e}),[2,le({path:Fe(this.widgetId),queryObject:t,queryObjectForLogger:r(r({},t),{widget_id:this.widgetId}),success:function(e){var t,n,o,s=(null===(n=e.included)||void 0===n?void 0:n[0])||{},d=s.attributes;te(tt.WidgetLoad),ae({eventName:nt.WidgetLoad,widgetId:i.widgetId,dimensions:{project_id:d.project_id,widget_type:d.kind,lang:d.lang}});var c=e.data.map((function(e){return r(r({id:e.id},e.attributes),e.meta)}));i.createTemplates(c);var h=s?r({id:s.id},d):void 0;return window.ainewsClickData.widgetsById=r(r({},window.ainewsClickData.widgetsById),((t={})[i.widgetId]=r(r({},null===(o=window.ainewsClickData.widgetsById)||void 0===o?void 0:o[i.widgetId]),h),t)),h?null!=h&&h.active?null!=h&&h.styles?null!=h&&h.constructor.div_id?(i.widgetBuilder?i.widgetBuilder.destroy():i.widgetBuilder=new Ot({widgetId:i.widgetId,onBreakpointChange:function(e){i.currentBreakpoint=e,y()},onSuccess:l,onError:u}),i.widgetBuilder.init({userId:i.userId,divId:h.constructor.div_id,titleSettings:h.constructor.title_settings,breakpoints:h.constructor.breakpoints,currentBreakpoint:i.currentBreakpoint,styles:h.styles,widgetMainClass:h.constructor.widget_main_class,recommendations:c,commandName:a}),i.widgetBuilder.build()):u("Not found DOM element in settings for widget"):u("Not found styles in settings for widget"):u("Widget is disabled in the admin settings"):u(z)},error:function(e){"development"!==window.ainewsClickData.appEnv?u(e):le({path:Ue(i.widgetId),success:function(e){var t,n,o=r({id:e.data.id},e.data.attributes);window.ainewsClickData.widgetsById=r(r({},window.ainewsClickData.widgetsById),((t={})[i.widgetId]=r(r({},null===(n=window.ainewsClickData.widgetsById)||void 0===n?void 0:n[i.widgetId]),o),t)),i.widgetBuilder?i.widgetBuilder.destroy():i.widgetBuilder=new Ot({widgetId:i.widgetId,onBreakpointChange:function(e){i.currentBreakpoint=e,y()},onSuccess:l,onError:u}),i.widgetBuilder.init({userId:i.userId,divId:o.constructor.div_id,titleSettings:o.constructor.title_settings,breakpoints:o.constructor.breakpoints,currentBreakpoint:i.currentBreakpoint,styles:o.styles||o.constructor.styles||"",widgetMainClass:o.constructor.widget_main_class,recommendations:At(o.constructor.limit||4),commandName:a}),i.widgetBuilder.build()},error:function(e){return u(e)}})}})]}}))}))};return this.currentBreakpoint?y():this.getInfo({onSuccess:function(e){var i,n=null===(i=null==e?void 0:e.constructor)||void 0===i?void 0:i.breakpoints;t.currentBreakpoint=ct({windowWidth:window.innerWidth,breakpoints:n}),y()},onError:function(e){return u(e)}})},Pt.prototype.observe=function(e){var t=e.breakpoints,i=e.recommendations,n=e.commandName,r=e.onSuccess,o=e.onError;if(!Array.isArray(t))return o(C(Ze));if(!t.length)return o(O(Ze));if(t.some((function(e){return"object"!=typeof e})))return o('The elements of the "'+Ze+'" array must be of type "object"');if(t.some((function(e){return JSON.stringify(Object.keys(e).sort())!==JSON.stringify(["width","rows","columns","indentRows"].sort())})))return o('The elements of the "'+Ze+'" array must containt key "width", "rows", "columns", "indentRows"');if(!Array.isArray(i))return o(C(et));if(!i.length)return o(O(et));if(i.some((function(e){return"object"!=typeof e})))return o('The elements of the "'+et+'" array must be of type "object"');if(!i.some((function(e){return-1!==Object.keys(e).indexOf("item_id")})))return o('The elements of the "'+et+'" array must contain key "item_id"');var s=document.querySelector("["+T+'="'+this.widgetId+'"]');return s&&void 0!==s?s.querySelectorAll("["+R+"]").length?(this.widgetObserver?this.widgetObserver.destroy():this.widgetObserver=new ht({widgetId:this.widgetId,onSuccess:function(e){return r(e)},onError:function(e){return o(e)}}),this.widgetObserver.observe({userId:this.userId,breakpoints:t,recommendations:i,commandName:n})):o('Not found DOM elements with data attribute "'+R+'"'):o("Not found DOM element with "+T+'="'+this.widgetId+'"')},Pt.prototype.unobserve=function(e){var t=e.onSuccess,i=e.onError;return this.widgetObserver?(this.widgetObserver.destroy(),t("Observer for widget has been successfully destroyed")):i("Not found observer for widget")},Pt.prototype.createTemplates=function(e){var t,i,n=window.ainewsClickData.widgetsById[this.widgetId].instance,o=null==n?void 0:n.currentBreakpoint.grid,s=e.map((function(e,t){var i=o[t];return i!==gt.Ad||e.ad_slot?i:gt.Rec}));window.ainewsClickData.widgetsById=r(r({},window.ainewsClickData.widgetsById),((t={})[this.widgetId]=r(r({},null===(i=window.ainewsClickData.widgetsById)||void 0===i?void 0:i[this.widgetId]),{widgetTemplate:o,widgetRenderTemplate:s,templateExpected:o.join(",")===s.join(",")}),t))},Pt);function Pt(e){var t=e.widgetId,i=e.userId;this.userId=i,this.widgetId=t,this.projectId=window.ainewsClickData.projectId,this.currentBreakpoint=null,this.widgetBuilder=null,this.widgetObserver=null}function Wt(e){var t=e.data,i=e.title,n=e.isPassDataInCallback,r=void 0!==n&&n,o=e.callback;null!=o&&o(r?t:void 0),p(),i&&h(i),l(t),p(i?2:1)}function Lt(e,t,i){"config"!==e?"event"!==e?"widget"!==e?(h('running command ainewsClick("'+e+'", "'+t+'")'),u('Unknown command "'+e+'"'),p()):function(e,t){var i,n,o,s,a=t.widgetId,d=t.userId,c=t.count,u=t.excludeItemsIds,g=t.excludeCurrent,w=t.breakpoints,m=t.recommendations,v=t.widgetsCount,f=t.widgetIndex,b=t.onSuccess,y=t.onError,I=Z({service:"widget",args:e===mt.Observe?[e,{widgetId:a}]:arguments});if(e!==mt.Unobserve&&h($(I)),window.ainewsClickData.projectId)if(a){var k=null===(o=null===(n=window.ainewsClickData.widgetsById)||void 0===n?void 0:n[a])||void 0===o?void 0:o.instance;k||(k=new Mt({widgetId:a,userId:d||window.aiturecSharedData.uid}),window.ainewsClickData.widgetsById=r(r({},window.ainewsClickData.widgetsById),((i={})[a]=r(r({},null===(s=window.ainewsClickData.widgetsById)||void 0===s?void 0:s[a]),{instance:k}),i)));var _=K(I);switch(e){case mt.GetRecs:k.getRecs({count:c,excludeItemsIds:u,excludeCurrent:g,onSuccess:function(e){return Wt({data:e,title:_,isPassDataInCallback:!0,callback:b})},onError:function(e){return dt({message:e,title:_,isThrowError:!0,callback:y})}});break;case mt.GetInfo:k.getInfo({onSuccess:function(e){return Wt({data:e,title:_,isPassDataInCallback:!0,callback:b})},onError:function(e){return dt({message:e,title:_,isThrowError:!0,callback:y})}});break;case mt.Render:var E=Date.now();k.render({excludeItemsIds:u,excludeCurrent:g,widgetsCount:v,widgetIndex:f,commandName:I,onSuccess:function(e){console.timeEnd("Render items");var t=Date.now()-E;return console.log("Render items: "+t+" ms"),ae({eventName:nt.WidgetRendered,widgetId:a,dimensions:{render_time:t/1e3}}),Wt({data:e,title:_,callback:b})},onError:function(e){return dt({message:e,title:_,isThrowError:!0,callback:y})}});break;case mt.Observe:var S=y;if(!w)return dt({message:G(Ze),isThrowError:!0,callback:S});if(!m)return dt({message:G(et),isThrowError:!0,callback:S});h("additional options:",!1),l("breakpoints",w),l("recommendations",m),p(2),k.observe({recommendations:m,breakpoints:w,commandName:I,onSuccess:function(e){return Wt({data:e,title:_,callback:b})},onError:function(e){return dt({message:e,title:_,isThrowError:!0,callback:S})}});break;case mt.Unobserve:k.unobserve({onSuccess:function(e){return Wt({data:e,title:_,callback:b})},onError:function(e){return dt({message:e,title:_,isThrowError:!0,callback:y})}});break;default:dt({message:J(e),title:_,isThrowError:!0,callback:y})}}else dt({message:G($e),isThrowError:!0,callback:y});else dt({message:V,isThrowError:!0,callback:y})}(t,i||{}):function(e,t){var i=t.projectId,n=t.widgetId,r=t.userId,o=t.itemId,s=t.itemsIds,a=t.events,d=t.observerId,c=t.url,l=t.lang,u=t.positions,p=t.clickPosition,g=t.referrerItemId,w=t.urlType,m=t.teaserItemId,v=t.onSuccess,f=t.onError,b=Z({service:"event",args:arguments});if(h($(b)),i||window.ainewsClickData.projectId)if(e){var y=new st({userId:r||window.aiturecSharedData.uid,commandName:b,onSuccess:function(){return null==v?void 0:v()},onError:function(e){return null==f?void 0:f(new Error(e))}});switch(e){case Ve.PublicationView:case Ve.PublicationLike:y.sendPublication({itemId:o,eventType:e,projectId:i,observerId:d,url:c||""+window.location.origin+window.location.pathname+window.location.search,lang:l});break;case Ve.WidgetClick:case Ve.ItemClick:y.sendWidgetClick({widgetId:n,itemId:o,positions:u,clickPosition:p,referrerItemId:g,eventType:e,urlType:w,teaserItemId:m});break;case Ve.WidgetShow:y.sendWidgetShow({widgetId:n,itemsIds:s});break;case Ve.WidgetEvents:y.sendWidgetEvents({widgetId:n,events:a});break;default:dt({message:H(e),title:K(b),isThrowError:!0,callback:f})}}else dt({message:G(Ye),isThrowError:!0,callback:f});else dt({message:V,isThrowError:!0,callback:f})}(t,i||{}):function(e,t){y({projectId:e}),re(),se();var i,n,o=k(N)||_(N,(i=(new Date).getTime(),n=performance&&performance.now&&1e3*performance.now()||0,"xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,(function(e){var t=16*Math.random();return 0<i?(t=(i+t)%16|0,i=Math.floor(i/16)):(t=(n+t)%16|0,n=Math.floor(n/16)),("x"===e?t:3&t|8).toString(16)})))),s=k(M);window.ainewsClickData={projectId:e,apiUrl:"https://b2b.ainews.kz/api",apiMetricsUrl:"https://script.metrics.ainews.kz/api",appEnv:"prod",appBranch:"unknown",appName:"ainews-click",appVersion:"v1",appBundleVersion:"2.18.2"},window.aiturecSharedData=r(r({},window.aiturecSharedData),{uid:o,onSetDebugMode:de,onUnsetDebugMode:ce,isDebugModeSet:(null==t?void 0:t.debug)||!!s&&"true"===s}),window.ainewsClickDiagnostics=Y,h("running command "+Z({service:"config",args:arguments})),l("The script was successfully initialized"),p()}(t,i)}!function(){var e=window.ainewsClickDataLayer||[];if(e.length){for(var t=0;t<e.length;t+=1)Lt.apply(void 0,e[t]);window.ainewsClick=Lt}}()}();